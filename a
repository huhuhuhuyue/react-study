[1mdiff --git a/src/kReactRouterDom/BrowserRouter.js b/src/kReactRouterDom/BrowserRouter.js[m
[1mindex fb9fcee..7275494 100644[m
[1m--- a/src/kReactRouterDom/BrowserRouter.js[m
[1m+++ b/src/kReactRouterDom/BrowserRouter.js[m
[36m@@ -16,3 +16,9 @@[m [mexport default class BrowserRouter extends Component {[m
     )[m
   }[m
 }[m
[32m+[m[41m[m
[32m+[m[32m// BrowserRouterã€HashRouterã€MemoryRouterå®ç°æ—¶çš„åŒºåˆ«[m[41m[m
[32m+[m[32m// BrowserRouterä½¿ç”¨createBrowserHistory()[m[41m[m
[32m+[m[32m// HashRouterä½¿ç”¨createHashHistory()[m[41m[m
[32m+[m[32m// MemoryRouteä½¿ç”¨createMemoryHistory()[m[41m[m
[41m+[m
[1mdiff --git a/src/kReactRouterDom/Route.js b/src/kReactRouterDom/Route.js[m
[1mindex bfbd058..ab57fdc 100644[m
[1m--- a/src/kReactRouterDom/Route.js[m
[1m+++ b/src/kReactRouterDom/Route.js[m
[36m@@ -1,6 +1,8 @@[m
 import React, { Component } from 'react'[m
 import context from './context'[m
 import matchPath from './matchPath'[m
[32m+[m[41m[m
[32m+[m[32mconst Provider = context.Provider[m[41m[m
 export default class Route extends Component {[m
   render() {[m
     // console.log(this.props) // {component: Æ’}[m
[36m@@ -10,15 +12,35 @@[m [mexport default class Route extends Component {[m
           (context) => {[m
             // console.log(context)[m
             // å¦‚æœå½“å‰çš„pathname === this.props.pathï¼Œæ¸²æŸ“this.props.component[m
[31m-            // const math = context.history.location.pathname === this.props.path[m
[32m+[m[32m            // const math = location.pathname === this.props.path[m[41m[m
[32m+[m[32m            // return math ? React.createElement(this.props.component) : null // ç®€æ˜“ç‰ˆ[m[41m[m
[32m+[m[41m[m
[32m+[m[32m            const {location} = context;[m[41m[m
[32m+[m[32m            const {path, children, component, render} = this.props[m[41m[m
[32m+[m[32m            // å¦‚æœåŒ¹é…æ¸²æŸ“ä¸‰è€…ä¹‹ä¸€ï¼Œå¦‚æœä¸åŒ¹é…æ¸²æŸ“children[m[41m[m
             // react-routeä¸­çš„matchPath.jsæ–‡ä»¶æœ‰ä¸ªmatchPathæ–¹æ³•ï¼ŒåŸæ¥å¯¹æ¯”pathï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ç°åœ¨æ˜¯pathnameå’Œå½“å‰çš„propså¯¹è±¡[m
[31m-            const math = matchPath(context.history.location.pathname, this.props)[m
[31m-            return math ? React.createElement(this.props.component) : null[m
[31m-          }[m
[31m-        }[m
[32m+[m[32m            // å½“pathå­˜åœ¨æ—¶å…ˆç”¨matchPathå»matchï¼Œå¦åˆ™å°±ç”¨contextçš„match[m[41m[m
[32m+[m[32m            const match = path ? matchPath(location.pathname, this.props) : context.match[m[41m[m
[32m+[m[32m            const props = {...context, ...location, match} // è¦ä¼ é€’ç»™è·¯ç”±ç»„ä»¶çš„å‚æ•°ï¼Œæœ‰çš„é¡µé¢éœ€è¦è·å–matchï¼Œæ‰€ä»¥è¦ä¼ ä¸‹å»[m[41m[m
[32m+[m[32m            return ([m[41m[m
[32m+[m[32m              <Provider value={props}>[m[41m[m
[32m+[m[32m                {match[m[41m[m
[32m+[m[32m                  ? children[m[41m[m
[32m+[m[32m                    ? typeof children === "function"[m[41m[m
[32m+[m[32m                      ? children(props)[m[41m[m
[32m+[m[32m                      : children[m[41m[m
[32m+[m[32m                    : component[m[41m[m
[32m+[m[32m                    ? React.createElement(component, props)[m[41m[m
[32m+[m[32m                    : render[m[41m[m
[32m+[m[32m                    ? render(props)[m[41m[m
[32m+[m[32m                    : null[m[41m[m
[32m+[m[32m                  : typeof children === "function"[m[41m[m
[32m+[m[32m                  ? children(props)[m[41m[m
[32m+[m[32m                  : null}[m[41m[m
[32m+[m[32m              </Provider>[m[41m[m
[32m+[m[32m            );[m[41m[m
[32m+[m[32m        }}[m[41m[m
       </context.Consumer>[m
     )[m
[31m-    // return this.props.component()[m
[31m-[m
   }[m
 }[m
[1mdiff --git a/src/kReactRouterDom/Router.js b/src/kReactRouterDom/Router.js[m
[1mindex d6bd11e..6820a83 100644[m
[1m--- a/src/kReactRouterDom/Router.js[m
[1m+++ b/src/kReactRouterDom/Router.js[m
[36m@@ -3,12 +3,18 @@[m [mimport context from './context'[m
 [m
 const Provider = context.Provider[m
 export default class Router extends Component {[m
[32m+[m[32m  // matchåˆå§‹å€¼æ˜¯æ ¹è·¯å¾„ï¼Œç”¨æ³•æ¥æºäºæºç ï¼Œæºç ä½ç½®node_modules\react-router\modules\Router.js[m[41m[m
[32m+[m[32m  // è¦ç»™[m[41m[m
[32m+[m[32m  static computeRootMatch(pathname) {[m[41m[m
[32m+[m[32m    return { path: "/", url: "/", params: {}, isExact: pathname === "/" };[m[41m[m
[32m+[m[32m  }[m[41m[m
   constructor(props) {[m
     super(props)[m
     // è·¯ç”±å‘ç”Ÿå˜åŒ–åï¼Œé¡µé¢ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Œè¦æŠŠlocationå­˜åœ¨stateé‡Œï¼Œå½“è·¯ç”±å˜åŒ–æ—¶æ”¹å˜stateï¼Œå‡ºå‘å­ç»„ä»¶é‡æ–°æ¸²æŸ“[m
     this.state = {[m
       location: props.history.location[m
     }[m
[32m+[m[41m    [m
     // historyæœ‰ä¸€ä¸ªlistionæ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°åˆæ¥æ”¶locationä½œä¸ºå‚æ•°ï¼Œæ‰€ä»¥å½“locationå‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ”¹å˜stateä¸­çš„locationï¼Œè§¦å‘å­ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œç›¸å½“äºè®¢é˜…[m
     this.unlisten = this.props.history.listen((location) => {[m
       this.setState({location})[m
[36m@@ -20,6 +26,15 @@[m [mexport default class Router extends Component {[m
   }[m
   [m
   render() {[m
[31m-    return <Provider value={{history: this.props.history}}>{this.props.children}</Provider>[m
[32m+[m[32m    // login pageé¡µé¢éœ€è¦ä»propsä¸Šå–locationï¼Œæ‰€ä»¥è¦æŠŠlocationä¼ ä¸‹å»[m[41m[m
[32m+[m[32m    // useRouteMatchä¸­éœ€è¦ä½¿ç”¨matchï¼Œæ‰€ä»¥ç»™matchä¸€ä¸ªåˆå§‹å€¼[m[41m[m
[32m+[m[32m    return <Provider[m[41m [m
[32m+[m[32m      value={{[m[41m[m
[32m+[m[32m        history: this.props.history,[m[41m [m
[32m+[m[32m        location: this.state.location,[m[41m [m
[32m+[m[32m        match: Router.computeRootMatch(this.state.location.pathname)[m[41m[m
[32m+[m[32m    }}>[m[41m[m
[32m+[m[32m      {this.props.children}[m[41m[m
[32m+[m[32m    </Provider>[m[41m[m
   }[m
 }[m
[1mdiff --git a/src/kReactRouterDom/index.js b/src/kReactRouterDom/index.js[m
[1mindex 5ffbc26..9082761 100644[m
[1m--- a/src/kReactRouterDom/index.js[m
[1m+++ b/src/kReactRouterDom/index.js[m
[36m@@ -1,9 +1,22 @@[m
 import BrowserRouter from './BrowserRouter'[m
 import Route from './Route'[m
 import Link from './Link'[m
[32m+[m[32mimport {useHistory, useLocation, useRouteMatch, useParams} from './hooks'[m[41m[m
[32m+[m[32mimport withRouter from './withRouter'[m[41m[m
[32m+[m[32mimport Switch from './Switch'[m[41m[m
[32m+[m[32mimport Redirect from './Redirect'[m[41m[m
[32m+[m[32mimport Prompt from './Prompt'[m[41m[m
 [m
 export {[m
   BrowserRouter,[m
   Route,[m
[31m-  Link[m
[32m+[m[32m  Link,[m[41m[m
[32m+[m[32m  useHistory,[m[41m[m
[32m+[m[32m  useLocation,[m[41m[m
[32m+[m[32m  useRouteMatch,[m[41m[m
[32m+[m[32m  useParams,[m[41m[m
[32m+[m[32m  withRouter,[m[41m[m
[32m+[m[32m  Switch,[m[41m[m
[32m+[m[32m  Redirect,[m[41m[m
[32m+[m[32m  Prompt[m[41m[m
 }[m
\ No newline at end of file[m
[1mdiff --git a/src/pages/reactRouterPage/LoginPage.js b/src/pages/reactRouterPage/LoginPage.js[m
[1mindex 292f0a8..1be0b5c 100644[m
[1m--- a/src/pages/reactRouterPage/LoginPage.js[m
[1m+++ b/src/pages/reactRouterPage/LoginPage.js[m
[36m@@ -1,5 +1,6 @@[m
 import React, { Component } from 'react'[m
[31m-import {Redirect} from 'react-router-dom'[m
[32m+[m[32m// import {Redirect} from 'react-router-dom'[m[41m[m
[32m+[m[32mimport { Redirect} from '../../kReactRouterDom/index'[m[41m[m
 import { connect } from 'react-redux'[m
 // import { connect } from '../../kReactRedux/index'[m
 @connect([m
[1mdiff --git a/src/pages/reactRouterPage/PrivateRoute.js b/src/pages/reactRouterPage/PrivateRoute.js[m
[1mindex bb18eb8..6f2643e 100644[m
[1m--- a/src/pages/reactRouterPage/PrivateRoute.js[m
[1m+++ b/src/pages/reactRouterPage/PrivateRoute.js[m
[36m@@ -1,5 +1,6 @@[m
 import React from 'react'[m
[31m-import {Route, Redirect} from 'react-router-dom'[m
[32m+[m[32m// import {Route, Redirect} from 'react-router-dom'[m[41m[m
[32m+[m[32mimport {Route, Redirect} from '../../kReactRouterDom/index'[m[41m[m
 import { connect } from 'react-redux'[m
 // import { connect } from '../../kReactRedux/index'[m
 [m
[1mdiff --git a/src/pages/reactRouterPage/ProductPage.js b/src/pages/reactRouterPage/ProductPage.js[m
[1mindex d7db04f..283b053 100644[m
[1m--- a/src/pages/reactRouterPage/ProductPage.js[m
[1m+++ b/src/pages/reactRouterPage/ProductPage.js[m
[36m@@ -1,28 +1,89 @@[m
[31m-import React from 'react'[m
[31m-import {Route, Link } from 'react-router-dom'[m
[32m+[m[32mimport React, { Component } from 'react'[m[41m[m
[32m+[m[32m// import {Route, Link, withRouter, Prompt} from 'react-router-dom'[m[41m[m
[32m+[m[32mimport {[m[41m[m
[32m+[m[32m  Route,[m[41m[m
[32m+[m[32m  Link,[m[41m[m
[32m+[m[32m  // useHistory,[m[41m[m
[32m+[m[32m  // useLocation,[m[41m[m
[32m+[m[32m  // useRouteMatch,[m[41m[m
[32m+[m[32m  // useParams[m[41m[m
[32m+[m[32m  withRouter,[m[41m[m
[32m+[m[32m  Prompt[m[41m[m
[32m+[m[32m} from '../../kReactRouterDom/index'[m[41m[m
 [m
[32m+[m[32m// ----------- å‡½æ•°ç»„ä»¶ProductPage ----------[m[41m[m
 // è·¯ç”±è·³è½¬çš„é¡µé¢æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼š{history: {â€¦}, location: {â€¦}, match: {â€¦}, staticContext: undefined}[m
[31m-export default function ProductPage({match, location}) {[m
[31m-  console.log(match) // {path: "/product/:id", url: "/product/2", isExact: false, params: {â€¦}}[m
[31m-  // console.log(location) // {pathname: "/product/2/detail/2", search: "", hash: "", state: undefined, key: "eandz3"}[m
[31m-  const {id} = match.params[m
[31m-  return ([m
[31m-    <div>[m
[31m-      <p>ProductPageï¼š{id}</p>[m
[31m-      {/* åµŒå¥—è·¯ç”±*/}[m
[31m-      <Link to={match.url + '/detail/' + id}>detail</Link>[m
[31m-      <Route path={match.url + '/detail/:id'} component={Detail}></Route>[m
[31m-    </div>[m
[31m-  )[m
[32m+[m[32m// function ProductPage({match, location}) {[m[41m[m
[32m+[m[32m//   // console.log(match) // {path: "/product/:id", url: "/product/2", isExact: false, params: {â€¦}}[m[41m[m
[32m+[m[32m//   // console.log(location) // {pathname: "/product/2/detail/2", search: "", hash: "", state: undefined, key: "eandz3"}[m[41m[m
[32m+[m[32m//   const {id} = match.params[m[41m[m
[32m+[m[32m//   return ([m[41m[m
[32m+[m[32m//     <div>[m[41m[m
[32m+[m[32m//       <p>ProductPageï¼š{id}</p>[m[41m[m
[32m+[m[32m//       {/* åµŒå¥—è·¯ç”±*/}[m[41m[m
[32m+[m[32m//       <Link to={match.url + '/detail/' + id}>detail</Link>[m[41m[m
[32m+[m[32m//       <Route path={match.url + '/detail/:id'} component={Detail}></Route>[m[41m[m
[32m+[m[32m//     </div>[m[41m[m
[32m+[m[32m//   )[m[41m[m
[32m+[m[32m// }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m// @withRouter[m[41m[m
[32m+[m[32m// class ProductPage extends Component {[m[41m[m
[32m+[m[32m//   render() {[m[41m[m
[32m+[m[32m//     const {id} = this.props.match.params[m[41m[m
[32m+[m[32m//     return ([m[41m[m
[32m+[m[32m//       <div>[m[41m[m
[32m+[m[32m//         <p>ProductPageï¼š{id}</p>[m[41m[m
[32m+[m[32m//         {/* åµŒå¥—è·¯ç”±*/}[m[41m[m
[32m+[m[32m//         <Link to={this.props.match.url + '/detail/' + id}>detail</Link>[m[41m[m
[32m+[m[32m//         <Route path={this.props.match.url + '/detail/:id'} component={Detail}></Route>[m[41m[m
[32m+[m[32m//       </div>[m[41m[m
[32m+[m[32m//     )[m[41m[m
[32m+[m[32m//   }[m[41m[m
[32m+[m[32m// }[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[32m+[m[32m@withRouter[m[41m[m
[32m+[m[32mclass ProductPage extends Component {[m[41m[m
[32m+[m[32m  constructor(props) {[m[41m[m
[32m+[m[32m    super(props);[m[41m[m
[32m+[m[32m    this.state = {confirm: true};[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[32m  render() {[m[41m[m
[32m+[m[32m    // console.log("Product", this.props)[m[41m[m
[32m+[m[32m    return ([m[41m[m
[32m+[m[32m      <div>[m[41m[m
[32m+[m[32m        <h3>Product</h3>[m[41m[m
[32m+[m[32m        <Link to="/">go home</Link>[m[41m[m
[32m+[m[32m        <Route path={this.props.match.url + '/detail/:id'} component={Detail}></Route>[m[41m[m
[32m+[m[32m        <Prompt[m[41m[m
[32m+[m[32m          when={this.state.confirm}[m[41m[m
[32m+[m[32m          // message="Are you sure you want to leave?"[m[41m[m
[32m+[m[32m          message={location => {[m[41m[m
[32m+[m[32m            return "Are you sure you want to leave-fun";[m[41m[m
[32m+[m[32m          }}[m[41m[m
[32m+[m[32m        />[m[41m[m
[32m+[m[32m      </div>[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
 }[m
 [m
 [m
 function Detail ({match, location}) {[m
[31m-  console.log(match) // å’Œçˆ¶è·¯ç”±çš„matchä¸åŒï¼š{path: "/product/2/detail/:id", url: "/product/2/detail/2", isExact: true, params: {â€¦}}[m
[32m+[m[32m  // console.log([m[41m[m
[32m+[m[32m  //   useHistory(),[m[41m[m
[32m+[m[32m  //   useLocation(),[m[41m[m
[32m+[m[32m  //   useRouteMatch(),[m[41m[m
[32m+[m[32m  //   useParams()[m[41m[m
[32m+[m[32m  // )[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  // console.log(match) // å’Œçˆ¶è·¯ç”±çš„matchä¸åŒï¼š{path: "/product/2/detail/:id", url: "/product/2/detail/2", isExact: true, params: {â€¦}}[m[41m[m
   // console.log(location) // å’Œçˆ¶è·¯ç”±çš„locationå®Œå…¨ä¸€æ ·ï¼š{pathname: "/product/2/detail/2", search: "", hash: "", state: undefined, key: "eandz3"}[m
   return ([m
     <div>[m
       detailï¼š{match.params.id}[m
     </div>[m
   )[m
[31m-}[m
\ No newline at end of file[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32mexport default ProductPage[m
\ No newline at end of file[m
[1mdiff --git a/src/pages/reactRouterPage/ReactRouterPage.js b/src/pages/reactRouterPage/ReactRouterPage.js[m
[1mindex 9884198..5b74d55 100644[m
[1m--- a/src/pages/reactRouterPage/ReactRouterPage.js[m
[1m+++ b/src/pages/reactRouterPage/ReactRouterPage.js[m
[36m@@ -10,13 +10,13 @@[m [mimport React, { Component } from 'react'[m
 // useParams,[m
 // withRouter[m
 // import { BrowserRouter as Router, Route, Link, Switch } from 'react-router-dom'[m
[31m-import { BrowserRouter as Router, Route, Link } from '../../kReactRouterDom/index'[m
[32m+[m[32mimport { BrowserRouter as Router, Route, Link, Switch } from '../../kReactRouterDom/index'[m[41m[m
 import IndexPage from './IndexPage'[m
[31m-// import LoginPage from './LoginPage'[m
[31m-// import UserPage from './UserPage'[m
[32m+[m[32mimport LoginPage from './LoginPage'[m[41m[m
[32m+[m[32mimport UserPage from './UserPage'[m[41m[m
 import NotFindPage from './NotFindPage'[m
[31m-// import ProductPage from './ProductPage'[m
[31m-// import PrivateRoute from './PrivateRoute'[m
[32m+[m[32mimport ProductPage from './ProductPage'[m[41m[m
[32m+[m[32mimport PrivateRoute from './PrivateRoute'[m[41m[m
 export default class ReactRouterPage extends Component {[m
   render() {[m
     return ([m
[36m@@ -32,7 +32,7 @@[m [mexport default class ReactRouterPage extends Component {[m
           {/* åŠ¨æ€è·¯ç”±ï¼šåœ¨è·¯ç”±åœ°å€ååŠ /1ä¼ é€’å‚æ•° */}[m
           <Link to='/product/1'>äº§å“1 | </Link>[m
           <Link to='/product/2'>äº§å“2 |</Link>[m
[31m-          {/* <Switch> */}[m
[32m+[m[32m          <Switch>[m[41m[m
             {/**[m
              * è·¯ç”±çš„ä¸‰ç§åŒ¹é…æ¨¡å¼ï¼šchildrenã€componentã€render[m
              * ä¸‰è€…æ˜¯äº’æ–¥çš„[m
[36m@@ -54,16 +54,17 @@[m [mexport default class ReactRouterPage extends Component {[m
               <p> æˆ‘æ˜¯login page </p>[m
               <p> æˆ‘æ˜¯login page </p>[m
             </Route> */}[m
[31m-            {/* <Route path='/login' component={LoginPage}></Route> */}[m
[32m+[m[32m            <Route path='/login' component={LoginPage}></Route>[m[41m[m
 [m
[31m-            {/* <Route path='/user' component={UserPage}></Route> */}[m
[32m+[m[32m            { /* <Route path='/user' component={UserPage}></Route> */}[m[41m[m
             {/* ä½¿ç”¨PrivateRouteåšè·¯ç”±æ‹¦æˆª */}[m
[31m-            {/* <PrivateRoute path='/user' component={UserPage}></PrivateRoute> */}[m
[32m+[m[32m            <PrivateRoute path='/user' component={UserPage}></PrivateRoute>[m[41m[m
             [m
             {/* åœ¨è·¯ç”±åœ°å€ååŠ /:idæ¥æ”¶å‚æ•° */}[m
[31m-            {/* <Route path='/product/:id' component={ProductPage}></Route> */}[m
[32m+[m[32m            <Route path='/product/:id' component={ProductPage}></Route>[m[41m[m
[32m+[m[41m            [m
             <Route component={NotFindPage}></Route>[m
[31m-          {/* </Switch> */}[m
[32m+[m[32m          </Switch>[m[41m[m
         </Router>[m
       </div>[m
     )[m
